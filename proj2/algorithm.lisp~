(defun alpha-beta (root player1 player2 &optional (time-limit 1000) (depth 5))
  "Alpha Beta"
  (let ((start (get-internal-real-time)))
    (labels ((max-layer(parent p1 depth alpha beta)
               "Max layer in the algorithm."
               (cond ((or (equal depth 0) (>= (time-available time-limit start) 90)) (print "AEIOUd")  (evaluate parent p1))
                     (t (dolist (child (sort (partenogenese parent player1) #'(lambda(v1 v2) (>= (evaluate v1 p1) (evaluate v2 p1)))))
                          (print "2")
                          (setf alpha (max alpha (min-layer child player2 (1- depth) alpha beta)))
                          (print "AEIOU3")
                          (if (>= alpha beta) (return-from max-layer beta)))
                        (print "a")
                        alpha)))
             (min-layer(parent p1 depth alpha beta)
               "Max layer in the algorithm."
               (cond ((or (equal depth 0) (>= (time-available time-limit start) 90)) (print "AEIOUv") (evaluate parent p1))
                     (t (dolist (child (sort (partenogenese parent player1) #'(lambda(v1 v2) (<= (evaluate v1 p1) (evaluate v2 p1)))))
                          (print "1")
                          (setf beta (min beta (max-layer child player1 (1- depth) alpha beta)))
                          (print "AEIOU4")
                          (if (>= alpha beta) (return-from min-layer alpha)))
                        (print "AEIOUa")
                        beta))))                                                
      (max-layer root player1 depth most-negative-fixnum most-positive-fixnum))))


